# 功能展示
用于在抖音直播间自动挂机领取福袋，只要手机不关机就能24小时无限刷福袋  
一个月即使运气非常差，中10来个奖品还是很轻松的！  
部分奖品：  
<img width="1065" height="871" alt="image" src="https://github.com/user-attachments/assets/1603ed0b-16ec-4087-8c8b-e9c09484a0f3" />  
  
# 使用方法
1.手机打开“手势导航”，开启【屏幕内三键导航】，把3个按键显示出来  
2.手机连接电脑，开启开发者选项，usb调试打开，电脑上CMD命令提示行中输入adb devices命令能找到设备ID  
3.手机页面初始化位置，打开抖音->个人中心->关注->直播中->随意进一个直播间  
4.然后执行douyin_guaji.py文件即可  
5.要是完全不知道咋弄或者运行后有什么问题，你都可以到B站找到叼哥，会帮你答疑或者私有化部署
## 注意
6.缺少各种python三方库文件的需要自己安装一下，运行下面的命令：  
pip install pillow paddlepaddle paddleocr numpy  
从粉丝反馈来看，最新版的paddlepaddle可能会有问题  
7.根据自己设备的情况，修改douyin_guaji.py文件中y轴的像素偏移值，可正可负，通常调整区间在【-50,50】  
默认手机分辨率是1080*2400的像素，即使是相同的分辨率，可能也会因为手机顶部的刘海不一样，以及是否使用了底部导航按钮，导致存在Y轴的偏移  
![image](https://github.com/user-attachments/assets/e99dbd11-137b-407f-a37f-92a7b8235f90)  
8.将会在4.0版本自动识别偏移值，后续不再需要调整任何参数，全自动识别、运行（叼哥B站达到1.5W粉发布）  
9.基本上大部分问题，都能从这篇文章找到答案和建议：https://www.bilibili.com/opus/1104972369516036117  

# 版本更新&预更新内容
    V1.0
    支持无限循环挂机直播间
    1.判断直播间福袋内容是否是想要的，如果不想要则切换直播间
    2.直播间倒计时是否还有很久，太久则切换直播间
    3.当直播间开奖后，立马切换直播间去别的直播间挂机

    V1.1
    1.对人机弹窗做判定,适当滑动解锁
    2.对截图函数做优化，处理无法截图的情况
    3.优化不切换直播间时的逻辑

    V1.2
    1.判定划动图片验证的人机校验，自动滑动一定距离处理人机验证
    2.优化直播间判定逻辑，增加直播停留时间减少被人机的概率
    3.增加直播间等待时间的参数，控制直播停留时间减少被人机的概率
    4.增加对当前时间的判定，不同时间段对抽奖的内容做不同的处理

    V1.3
    1.增加直播已结束的判定
    2.增加是否在直播列表页面的判定
    3.增加回到直播列表重新进入直播的逻辑
    4.增加点亮粉丝团抽奖的特殊处理
    5.直播提早开奖补充截图内容获取，用于debug

    V1.4
    1.兼容了一下直播间忽然弹出来618红包弹窗导致页面一直卡在直播间的问题
    2.修复进入直播间列表的功能异常的问题
    3.优化挂机的时候直播间关闭的判定
    4.兼容 同时存在参与条件+参与任务的抽奖
    5.增加判断是否在个人中心的关注页面
    6.修复领完奖后回到直播间判断不在直播间的问题
    7.增加上划切换到直播间直播间已关闭的判断
    8.兼容福袋参与抽奖的文案为：参与抽奖

    V1.5
    1.优化设备未识别的处理逻辑
    2.优化图片文件夹不存在创建文件夹的逻辑

    V1.6
    1.增加日志内容同步输出到log文件中，方便问题排查
    2.修复了到凌晨个别直播间提早关闭会导致直播判定卡住的问题
    3.调整不切换直播间挂机的逻辑，现在会一直等待到直播间关闭才会切换

    V1.7
    1.修复单独挂一个直播间，判定直播间已关闭后，不切换直播间的问题
    2.增加全局的监控，无论发生什么情况，只要长时间判定为没有福袋，则重置整个挂机流程

    V2.0
    1.做了不同分辨率手机的兼容，现在不是1080*2400的手机也能挂机了
    2.优化了从直播间列表进直播间连刷新2次的问题
    3.优化了领奖完成后返回直播间领奖界面依旧没关闭的情况
    4.修复了过了凌晨之后直播间一直没有福袋的判定问题

    V2.1
    1.修复节假日出现的直播红包弹窗一直无法被退出关闭的问题
    2.兼容操控通过wifi直连到笔记本电脑上的手机
    3.优化弹窗人机验证后，点击返回无法退出验证的情况
    4.加入手机电量验证逻辑
    5.增加手机电量不足时进入待机模式的逻辑，避免手机直接关机
    6.兼容领奖完成后，判定关闭中奖弹窗后还有一个提醒领奖窗口的情况
    7.优化凌晨后整个直播列表无直播间导致无法刷新的问题

    V2.2
    1.优化日志打印逻辑
    2.增加点击福袋无法打开，被系统限制参与抽奖的判定逻辑
    3.修复在固定直播间挂机会忽然切换直播间的问题
    4.修复：没有抽中，点击:我知道了,关闭弹窗，弹窗未关闭的问题
    5.修复进入没有加入粉丝团的直播间，无法抽奖但没有切换直播间的问题
    6.增加一个抽奖按钮的判定：活动已结束
    7.增加了切换到未加入店铺的直播间的抽奖判定
    8.修复：中奖后下单，回到直播间依旧存在中奖弹窗提醒关不掉的问题

    V2.3
    1.兼容任意分辨率的手机，增加横轴对应的分辨率设置
    2.优化代码，抽象一部分方法，去除冗余代码
    3.修复当直播间列表为空时，点击返回退出到关注中心，判定页面失效，无法回到直播间列表的问题
    4.开奖结束后增加一个随机时长等待，减小风控风险
    5.补充逻辑处理：直播间因为状态栏高度的不同，导致关闭的判定不同
    6.调整挂机逻辑，到后半夜固定时间区间时，不再参与抽奖

    V2.4
    1.调整偏移值逻辑，填任意正负数都会进行双重匹配，自动确认适宜的偏移值
    2.调整长时间无法识别到福袋的逻辑，避免重复打开都是无福袋的直播间导致被风控
    3.优化代码，抽象剩余部分方法，去除冗余代码
    4.修复偶尔出现中奖后，领奖完成返回到直播间，结果页面退回到了视频首页的问题
    5.补充下完单后，在购买成功页面的验证逻辑

    V3.0
    1.引入百度PaddleOCR图像识别库，替换掉pytesseract，大幅提升文字识别准确度
    2.优化代码，拆分基础操作函数到单独库做引用
    3.执行脚本，不再需要手动设置手机分辨率参数，会自动设置手机对应的值
    4.兼容人脸检测的人机验证弹窗的判定
    
    V3.1
    1.修复新账号中奖后，下完单返回到直播间，因为弹出一个'添加抖音商城到桌面'的弹窗，导致页面还卡在'购买成功'页面的问题
    2.修复偶尔退出直播间，直接退到了个人中心，进而没有正确打开关注列表的问题
    3.补充部分操作后的随机时长等待，规避被监控风险
    
    V3.2
    1.调整开奖后弹窗的点击判定，避免没有成功关闭弹窗的情况
    2.兼容开奖后没有中奖，但是给了会员专属优惠券的情况
    3.优化开奖后判定是否中奖及后续的逻辑
    
    V3.3
    1.将哪些福袋想要、不想要的配置移动到json文件中进行
    2.在关注列表页面补充一个vivo手机断开充电的判定
    3.调整开奖后未中奖，但发了一张优惠券的处理逻辑
    4.适当调大关键截图的区间，方便判定

    V4.0（叼哥B站到1.5W粉丝发布 或 第三档充电提早获取）
    1.不再需要填写偏移值等任何参数，直接运行，会自动找到合适的偏移值进行后续操作
    2.调整页面判断逻辑，实时记录当前所在页面的类型（直接间、直播列表、个人中心、订单页等）
    3.优化是否有福袋的判定逻辑
    4.重做福袋详情弹窗内容判定逻辑
    5.大幅调整代码逻辑，优化代码结构和性能
    6.增加参与抽奖文案为'不满足参与条件'的情况的处理
    7.补充刷新直播间列表逻辑，避免过于频繁刷新直播间导致被风控

    # 以下为预更新版本内容
    
    V4.1
    1.调整打开福袋详情判定异常后的关闭福袋弹窗位置，避免关闭弹窗实则是打开
    2.调整参与抽奖内容为加入粉丝团（1钻石）的判定和处理逻辑
    3.增加文件关闭机制，降低内存泄漏风险
    4.修复在直播间判定是否存在福袋次数减少的问题
    
    V4.2（叼哥B站到1.5W粉丝发布 或 第三档充电提早获取）
    1.模拟用户操作，到停止挂机时间段退出抖音，到开始挂机时间再启动抖音
    2.模拟用户操作，在视频首页刷一会视频，并随机加评论、点赞
    3.优化是否存在福袋的逻辑，只检测固定间隔的位置
    4.调整了凌晨关闭抖音后等待时长的逻辑，统一等待到8点继续挂机
    5.修复了福袋内容不想要多次切换直播间后，后续无法参与新福袋抽奖的问题
    
    V4.3（最高档充电提早获取）
    1.调整对极速版的直播列表的判定
    2.兼容部分直播间，在评论完后还要再点击‘观看直播’才能参与抽奖的情况
    3.兼容开奖后，点击‘知道了’偶发弹窗未成功关闭的情况
    4.将设备初次识别成功的偏移值存下来，后续运行改成直接读取保存的值
    
    V4.4
    1.重写判定福袋详情高度的逻辑
    2.重写判定福袋详情和倒计时的方法，做到可以适配任意分辨率的手机
    3.修复报错：UnicodeEncodeError: 'gbk' codec can't encode character
    
    V4.5
    1.修复开局挂机的直播间没有福袋，导致执行报错的问题
    2.调整参与福袋抽奖图标的截取逻辑，做到可以适配任意分辨率的手机
    3.调整开奖结果弹窗内容的截取逻辑，做到可以适配任意分辨率的手机
    3.增加对顶部状态栏高度的判定
    4.调整是否在某些指定页面的判定逻辑，做到可以适配任意分辨率的手机
    5.修复连续切换N个直播间，退出返回直播列表，多次循环后判定不到直播间的问题
    6.增加抽奖次数统计
    
    V4.6
    1.移除偏移值的设定，改为动态自动查询
    2.将设备初次识别成功的顶部状态栏高度存下来，后续运行改成直接读取保存的值
    3.优化福袋参与抽奖按钮文字的二次判定逻辑
    4.调整人机验证弹窗的判定
    5.优化到凌晨时段，无法关闭抖音，卡在了直播关注列表的情况
    
    V4.7
    1.新增直播间名称判定
    2.优化上划切换直播间失效，一直卡在同一个直播间的逻辑处理
    3.将设备初次识别成功的参与抽奖底部高度存下来，后续运行改成直接读取保存的值
    4.调整长时间无福袋的时间间隔判定及处理逻辑
    5.修复人机验证弹窗的判定异常
    
    V4.8
    1.针对每台手机，按直播间统计挂机以来累计参数抽奖次数和中奖/未中奖次数
    2.显示当日抽奖次数和运行的总计抽奖次数
    3.调整直播间名称读取逻辑
    4.兼容一个直播间同时有2个超级福袋的情况
    
    V4.9
    1.将设备初次识别成功的底部导航栏的顶部高度存下来，后续运行改成直接读取保存的值
    2.优化首页刷视频、刷活跃的判定和逻辑，特殊处理刷到直播间和视频首评的情况
    3.增加直播间额外刷评论的功能
    4.优化直播间名称识别的精确度
    5.优化在直播间点返回键无法退出的情况
    6.调整直播间关闭时，退出当前直播间的操作逻辑
    
    V4.10
    1.调整过了凌晨0点到关闭抖音之前这段时间，切换直播间的判定逻辑
    2.进一步优化是否存在福袋的判定
    3.支持在config文件中，自主配置不挂机的时间段
    4.调整福袋详情高度判定的范围
    5.优化找到设备几个相对位置的日志打印
    
    未来更新
    1.获取直播间名字，关联奖品和开奖时间，加入判定队列
    2.完全自动处理防沉迷验证，做到不触发人机为优先
    3.兼容挂机过程中弹出的：开通特惠省钱卡的弹窗
    4.增加钻石福袋挂机模式，在直播列表刷钻石
    5.处理异常操作导致弹窗：账号存在风险的验证
    6.兼容IOS系统，苹果手机也能挂机
    7.增加直播间瞎逛模式，无限切换，发现想要的福袋就抽一下
    8.其他来自充电粉丝们的建议，额外需要的功能
    9.支持个性化定制操作时间，模拟你的个人使用习惯，让操作更像真人（规避风控）
    10.兼容最新版本的paddleOCR 
    11.无需任何安装与配置，生成可执行exe文件打开即运行
# 看到最后了，白嫖成功记得点个星，或者B站找叼哥进QQ群！
